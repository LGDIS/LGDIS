# 統計取得SQL

sql_dead_count:                                     "select count(1) from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '7' and issues.project_id = ? and custom_values.custom_field_id = '142' and custom_values.value = '1:死亡'"     # 人的被害 / 死者（人）
sql_missing_count:                                  "select count(1) from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '7' and issues.project_id = ? and custom_values.custom_field_id = '142' and custom_values.value = '2:行方不明'" # 人的被害 / 行方不明者（人）
sql_seriously_injured_count:                        "select count(1) from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '7' and issues.project_id = ? and custom_values.custom_field_id = '142' and custom_values.value = '3:重傷'"     # 人的被害 / 負傷者 / 重傷（人）
sql_slightly_injured_count:                         "select count(1) from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '7' and issues.project_id = ? and custom_values.custom_field_id = '142' and custom_values.value = '4:軽傷'"     # 人的被害 / 負傷者 / 軽傷（人）
sql_complete_collapse_houses_count:                 "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '1:全壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 住家被害 / 全壊（棟）
sql_complete_collapse_households_count:             "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '1:全壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '32'"  # 住家被害 / 全壊（世帯）
#sql_complete_collapse_people_count:                "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '1:全壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = ''"    # 住家被害 / 全壊（人）
sql_half_collapse_houses_count:                     "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '3:半壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 住家被害 / 半壊（棟）
sql_half_collapse_households_count:                 "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '3:半壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '32'"  # 住家被害 / 半壊（世帯）
#sql_half_collapse_people_count:                    "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '3:半壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = ''"    # 住家被害 / 半壊（人）
sql_partial_damage_houses_count:                    "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '4:一部損壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 住家被害 / 一部破損（棟）
sql_partial_damage_households_count:                "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '4:一部損壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '32'"  # 住家被害 / 一部破損（世帯）
#sql_partial_damage_people_count:                   "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '4:一部損壊') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = ''"    # 住家被害 / 一部破損（人）
sql_inundation_above_floor_level_houses_count:      "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '5:床上浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 住家被害 / 床上浸水（棟）
sql_inundation_above_floor_level_households_count:  "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '5:床上浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '32'"  # 住家被害 / 床上浸水（世帯）
#sql_inundation_above_floor_level_people_count:     "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '5:床上浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = ''"    # 住家被害 / 床上浸水（人）
sql_inundation_under_floor_level_houses_count:      "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '6:床下浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 住家被害 / 床下浸水（棟）
sql_inundation_under_floor_level_households_count:  "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '6:床下浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '32'"  # 住家被害 / 床下浸水（世帯）
#sql_inundation_under_floor_level_people_count:     "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '8' and issues.project_id = ? and custom_values.custom_field_id = '31' and custom_values.value = '6:床下浸水') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = ''"    # 住家被害 / 床下浸水（人）
sql_damaged_public_building_count:                  "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '33' and issues.project_id = ? and custom_values.custom_field_id = '34' and custom_values.value = '1:非住家被害_公共建物') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'" # 非住家被害 / 公共建物（棟）
sql_damaged_other_building_count:                   "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from custom_values inner join (select issues.id from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '33' and issues.project_id = ? and custom_values.custom_field_id = '34' and custom_values.value = '2:非住家被害_その他') target_issues on custom_values.customized_id = target_issues.id where custom_values.custom_field_id = '157'"   # 非住家被害 / その他（棟）
sql_damaged_educational_facilities_count:           "select count(1) from issues where issues.tracker_id in ('34','35','36','37', '38') and issues.project_id = ?" # その他 / 文教施設（箇所）
sql_damaged_hospitals_count:                        "select count(1) from issues where issues.tracker_id = '40' and issues.project_id = ?" # その他 / 病院（箇所）
sql_damaged_roads_count:                            "select count(1) from issues where issues.tracker_id = '9' and issues.project_id = ?" # その他 / 道路（箇所）
sql_damaged_bridges_count:                          "select count(1) from issues where issues.tracker_id = '10' and issues.project_id = ?" # その他 / 橋りょう（箇所）
sql_damaged_rivers_count:                           "select count(1) from issues where issues.tracker_id = '69' and issues.project_id = ?" # その他 / 河川（箇所）
sql_water_failure_houses_count:                     "select ((select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '11' and issues.project_id = ? and custom_values.custom_field_id = '192')+(select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '12' and issues.project_id = ? and custom_values.custom_field_id = '204')) as count" # その他 / 水道（戸）
sql_dead_telephone_lines_count:                     "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '14' and issues.project_id = ? and custom_values.custom_field_id = '221'" # その他 / 電話（回線）
sql_blackout_houses_count:                          "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '76' and issues.project_id = ? and custom_values.custom_field_id = '195'" # その他 / 電気（戸）
sql_gas_supply_stopped_houses_count:                "select coalesce(sum(to_number(case custom_values.value when '' then '0' else custom_values.value end, '00000000000')), 0) as count from issues inner join custom_values on issues.id = custom_values.customized_id where issues.tracker_id = '13' and issues.project_id = ? and custom_values.custom_field_id = '213'" # その他 / ガス（戸）
